/* src/app/pages/incident-detail/incident-detail.scss */

/* ===== STYLES QUILL POUR AFFICHAGE EN LECTURE SEULE ===== */

.ql-container.ql-snow {
    /* Supprimer tous les arrière-plans et bordures Quill */
    background: none !important;
    border: none !important;
    box-shadow: none !important;
}

.ql-container.ql-snow .ql-editor {

    /* Réinitialisation de base */
    padding: 0 !important;
    border: none !important;
    background: none !important;
    box-shadow: none !important;

    /* Paragraphes */
    p {
        margin: 0 0 1rem 0 !important;
        line-height: 1.6 !important;
        background: none !important;
    }

    /* Formatage de texte */
    strong,
    b {
        font-weight: 700 !important;
    }

    em,
    i {
        font-style: italic !important;
    }

    u {
        text-decoration: underline !important;
    }

    s {
        text-decoration: line-through !important;
    }

    /* Titres */
    h1 {
        font-size: 1.8rem !important;
        font-weight: 700 !important;
        margin: 1.5rem 0 1rem 0 !important;
        line-height: 1.2 !important;
    }

    h2 {
        font-size: 1.4rem !important;
        font-weight: 600 !important;
        margin: 1.25rem 0 0.75rem 0 !important;
        line-height: 1.3 !important;
    }

    h3 {
        font-size: 1.2rem !important;
        font-weight: 600 !important;
        margin: 1rem 0 0.5rem 0 !important;
        line-height: 1.4 !important;
    }

    /* Listes ordonnées */
    ol {
        padding-left: 1.5rem !important;
        margin: 1rem 0 !important;
        list-style-type: decimal !important;
        background: none !important;

        li {
            margin: 0.25rem 0 !important;
            line-height: 1.6 !important;
            list-style-type: decimal !important;
            display: list-item !important;
            background: none !important;
        }
    }

    /* Listes à puces */
    ul {
        padding-left: 1.5rem !important;
        margin: 1rem 0 !important;
        list-style-type: disc !important;
        background: none !important;

        li {
            margin: 0.25rem 0 !important;
            line-height: 1.6 !important;
            list-style-type: disc !important;
            display: list-item !important;
            background: none !important;
        }
    }

    /* Checkboxes Quill */
    ul li[data-list="checked"],
    ul li[data-list="unchecked"],
    li[data-list="checked"],
    li[data-list="unchecked"] {
        list-style: none !important;
        position: relative !important;
        padding-left: 2rem !important;
        margin: 0.5rem 0 !important;
        display: block !important;
        background: none !important;
        transition: all 0.2s ease-in-out !important;
        /* Animation douce */

        &::before {
            content: '' !important;
            position: absolute !important;
            left: 0 !important;
            top: 0.1rem !important;
            width: 1.2rem !important;
            height: 1.2rem !important;
            border: 2px solid #6b7280 !important;
            border-radius: 4px !important;
            background: white !important;
            display: block !important;
            transition: all 0.2s ease-in-out !important;
            /* Animation sur checkbox */
        }
    }

    /* Checkbox cochée - avec coche verte et animation */
    ul li[data-list="checked"]::before,
    li[data-list="checked"]::before {
        background: #10b981 !important;
        border-color: #10b981 !important;
        background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m13.854 3.646-7.5 7.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6 10.293l7.146-7.147a.5.5 0 0 1 .708.708z'/%3e%3c/svg%3e") !important;
        background-size: 1rem !important;
        background-position: center !important;
        background-repeat: no-repeat !important;
        transform: scale(1.1) !important;
        /* Légère mise en évidence */
    }

    /* Style pour barrer le texte d'une case cochée avec animation */
    li[data-list="checked"] {
        text-decoration: line-through !important;
        opacity: 0.65 !important;
        color: #6b7280 !important;
        /* Couleur grisée */
        transition: all 0.3s ease-in-out !important;
    }

    /* Checkbox non cochée - style subtil */
    li[data-list="unchecked"] {
        opacity: 1 !important;
    }

    /* Citations */
    blockquote {
        border-left: 4px solid #e5e7eb !important;
        padding-left: 1rem !important;
        margin: 1rem 0 !important;
        font-style: italic !important;
        color: #6b7280 !important;
        background: rgba(243, 244, 246, 0.3) !important;
        border-radius: 0 6px 6px 0 !important;
    }

    /* Code inline amélioré */
    code {
        background: #f3f4f6 !important;
        padding: 0.125rem 0.25rem !important;
        border-radius: 4px !important;
        font-family: 'Courier New', monospace !important;
        font-size: 0.875rem !important;
        border: 1px solid #e5e7eb !important;
    }

    /* Blocs de code améliorés */
    pre {
        background: #f8fafc !important;
        padding: 1rem !important;
        border-radius: 8px !important;
        overflow-x: auto !important;
        margin: 1rem 0 !important;
        border: 1px solid #e2e8f0 !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;

        code {
            background: none !important;
            padding: 0 !important;
            border: none !important;
        }
    }

    /* Liens améliorés */
    a {
        color: #3b82f6 !important;
        text-decoration: underline !important;
        transition: color 0.2s ease-in-out !important;

        &:hover {
            color: #1d4ed8 !important;
            text-decoration: none !important;
        }
    }

    /* Alignements */
    .ql-align-center {
        text-align: center !important;
    }

    .ql-align-right {
        text-align: right !important;
    }

    .ql-align-justify {
        text-align: justify !important;
    }

    /* Indentations avec bordure visuelle */
    .ql-indent-1 {
        padding-left: 3rem !important;
        border-left: 2px solid #e5e7eb !important;
    }

    .ql-indent-2 {
        padding-left: 4.5rem !important;
        border-left: 2px solid #d1d5db !important;
    }

    .ql-indent-3 {
        padding-left: 6rem !important;
        border-left: 2px solid #9ca3af !important;
    }

    /* Support des couleurs de texte Quill */
    .ql-color-red {
        color: #ef4444 !important;
    }

    .ql-color-blue {
        color: #3b82f6 !important;
    }

    .ql-color-green {
        color: #10b981 !important;
    }

    .ql-color-yellow {
        color: #f59e0b !important;
    }

    .ql-color-purple {
        color: #8b5cf6 !important;
    }

    /* Support des surlignages */
    .ql-bg-yellow {
        background-color: #fef3c7 !important;
        padding: 0.125rem 0.25rem !important;
        border-radius: 3px !important;
    }

    .ql-bg-green {
        background-color: #d1fae5 !important;
        padding: 0.125rem 0.25rem !important;
        border-radius: 3px !important;
    }

    .ql-bg-blue {
        background-color: #dbeafe !important;
        padding: 0.125rem 0.25rem !important;
        border-radius: 3px !important;
    }
}

/* ===== RESPONSIVE AMÉLIORÉ ===== */
@media (max-width: 640px) {
    .ql-container.ql-snow .ql-editor {
        h1 {
            font-size: 1.5rem !important;
        }

        h2 {
            font-size: 1.25rem !important;
        }

        h3 {
            font-size: 1.125rem !important;
        }

        ol,
        ul {
            padding-left: 1rem !important;
        }

        li[data-list="checked"],
        li[data-list="unchecked"] {
            padding-left: 1.5rem !important;

            &::before {
                width: 1rem !important;
                height: 1rem !important;
                background-size: 0.75rem !important;
            }
        }

        /* Adaptations mobile pour blockquote */
        blockquote {
            margin: 0.5rem 0 !important;
            padding-left: 0.75rem !important;
        }

        /* Adaptations mobile pour code */
        pre {
            padding: 0.75rem !important;
            margin: 0.75rem 0 !important;
        }
    }
}

/* Mode impression */
@media print {
    .ql-container.ql-snow .ql-editor {
        /* Optimisations pour l'impression */
        color: black !important;
        background: white !important;

        a {
            color: black !important;
            text-decoration: underline !important;
        }

        blockquote {
            border-left-color: black !important;
            background: none !important;
        }

        code,
        pre {
            background: #f5f5f5 !important;
            border: 1px solid #ccc !important;
        }
    }
}