<header
  class="bg-gradient-to-r from-blue-600 to-blue-700 dark:from-gray-800 dark:to-gray-800 text-white shadow-lg transition-colors duration-300">
  <div class="container mx-auto px-4">
    <!-- Première ligne : Logo + Navigation principale + Dark Mode + Menu mobile -->
    <div class="flex items-center justify-between py-3">
      <!-- Logo et titre -->
      <div class="flex items-center space-x-3">
        <a [href]="frontUrl" class="flex items-center space-x-3 hover:opacity-90 transition-opacity">
          <img src="assets/images/urssaf-logo.png" alt="Urssaf" class="h-20 w-auto">
        </a>
      </div>

      <!-- Navigation principale (desktop seulement) -->
      <nav class="hidden lg:flex items-center space-x-8 ml-auto mr-8">
        <a href="http://ur837-intranet/prod/home/HOM_Homepage.php"
          class="hover:text-blue-200 dark:hover:text-gray-300 transition-colors duration-200 font-medium px-2">
          Accueil
        </a>
        <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-erh.php"
          class="hover:text-blue-200 dark:hover:text-gray-300 transition-colors duration-200 font-medium px-2">
          Ressources humaines
        </a>
        <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-article-liste.php"
          class="hover:text-blue-200 dark:hover:text-gray-300 transition-colors duration-200 font-medium px-2">
          Articles
        </a>
        <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-page-irp.php"
          class="hover:text-blue-200 dark:hover:text-gray-300 transition-colors duration-200 font-medium px-2">
          Instances représentatives
        </a>
        <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-page-applications.php"
          class="hover:text-blue-200 dark:hover:text-gray-300 transition-colors duration-200 font-medium px-2">
          Applications
        </a>
        <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-page-annuaire.php"
          class="hover:text-blue-200 dark:hover:text-gray-300 transition-colors duration-200 font-medium px-2">
          Annuaire
        </a>
        <a href="https://helpy.urssaf.recouv/helpy/libraries/views/connexion.php"
          class="hover:text-blue-200 dark:hover:text-gray-300 transition-colors duration-200 font-medium px-2">
          Helpy
        </a>
      </nav>

      <!-- Actions droite : Dark Mode + Menu mobile -->
      <div class="flex items-center space-x-3">
        <!-- Bouton Dark Mode -->
        <button (click)="themeService.toggleTheme()"
          class="p-2 rounded-md hover:bg-blue-500 dark:hover:bg-gray-700 transition-colors duration-200 border border-blue-400 dark:border-gray-600"
          [title]="'Thème actuel: ' + themeService.getThemeLabel() + ' - Cliquez pour changer'">
          <span class="text-lg">{{ themeService.getThemeIcon() }}</span>
        </button>

        <!-- Menu mobile (hamburger) -->
        <button (click)="toggleMobileMenu()"
          class="lg:hidden p-2 rounded-md hover:bg-blue-500 dark:hover:bg-gray-700 transition-colors"
          [attr.aria-expanded]="isMobileMenuOpen" aria-label="Menu de navigation">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              [attr.d]="isMobileMenuOpen ? 'M6 18L18 6M6 6l12 12' : 'M4 6h16M4 12h16M4 18h16'">
            </path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Menu mobile (affiché/masqué selon l'état) -->
    <div class="lg:hidden border-t border-blue-500 dark:border-gray-600 transition-all duration-300 ease-in-out"
      [class.max-h-0]="!isMobileMenuOpen" [class.max-h-96]="isMobileMenuOpen" [class.overflow-hidden]="true">

      <nav class="py-4 space-y-2">
        <a href="http://ur837-intranet/prod/home/HOM_Homepage.php" (click)="closeMobileMenu()"
          class="block px-3 py-2 rounded-md hover:bg-blue-500 dark:hover:bg-gray-700 transition-colors duration-200 text-sm font-medium">
          Accueil
        </a>
        <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-erh.php" (click)="closeMobileMenu()"
          class="block px-3 py-2 rounded-md hover:bg-blue-500 dark:hover:bg-gray-700 transition-colors duration-200 text-sm font-medium">
          Ressources humaines
        </a>
        <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-article-liste.php" (click)="closeMobileMenu()"
          class="block px-3 py-2 rounded-md hover:bg-blue-500 dark:hover:bg-gray-700 transition-colors duration-200 text-sm font-medium">
          Articles
        </a>
        <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-page-irp.php" (click)="closeMobileMenu()"
          class="block px-3 py-2 rounded-md hover:bg-blue-500 dark:hover:bg-gray-700 transition-colors duration-200 text-sm font-medium">
          Instances représentatives
        </a>
        <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-page-applications.php" (click)="closeMobileMenu()"
          class="block px-3 py-2 rounded-md hover:bg-blue-500 dark:hover:bg-gray-700 transition-colors duration-200 text-sm font-medium">
          Applications
        </a>
        <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-page-annuaire.php" (click)="closeMobileMenu()"
          class="block px-3 py-2 rounded-md hover:bg-blue-500 dark:hover:bg-gray-700 transition-colors duration-200 text-sm font-medium">
          Annuaire
        </a>
        <a href="https://helpy.urssaf.recouv/helpy/libraries/views/connexion.php" (click)="closeMobileMenu()"
          class="block px-3 py-2 rounded-md hover:bg-blue-500 dark:hover:bg-gray-700 transition-colors duration-200 text-sm font-medium">
          Helpy
        </a>
      </nav>
    </div>

    <!-- Deuxième ligne : Connexion/Utilisateur + Actions rapides  -->
    <div class="border-t border-blue-500 dark:border-gray-600 py-3">
      <div class="flex items-center justify-between">

        <!-- Bloc Connexion/Utilisateur -->
        <div class="flex items-center">
          @if (authService.user$ | async; as user) {
          <div class="text-right">
            <div class="font-semibold">
              Connecté en tant que : {{ user.full_name }} - {{ user.role_label }}
            </div>
          </div>
          <button (click)="logout()" title="Déconnexion"
            class="ml-2 h-6 w-6 flex items-center justify-center bg-red-500/80 hover:bg-red-500 rounded-full transition-colors">
            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
            </svg>
          </button>
          }
        </div>

        <!-- Actions rapides (si vous souhaitez utiliser un email d'assistance) -->
        <div class="hidden md:flex items-center space-x-6">
          <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-page-gouvernance.php"
            class="hover:text-blue-200 dark:hover:text-gray-300 transition-colors">
            La gouvernance
          </a>
          <a href="mailto:security-base@urssaf.fr"
            class="hover:text-blue-200 dark:hover:text-gray-300 transition-colors">
            Assistance informatique
          </a>
          <a href="http://ur837-intranet/prod/gabarits/GAB_Gabarit-page-archives.php"
            class="hover:text-blue-200 dark:hover:text-gray-300 transition-colors">
            Archives
          </a>
        </div>
      </div>
    </div>
  </div>
</header>